# Cargo configuration for nix-bench

[alias]
# Build commands
b = "build --release"

# Build agents for both x86_64 and aarch64 (statically linked with musl)
# Uses -v for verbose output to show build progress
agent = ["build", "-p", "nix-bench-agent", "--release", "-v", "--target", "x86_64-unknown-linux-musl", "--target", "aarch64-unknown-linux-musl"]

# Run coordinator (default binary)
r = "run --release --"

# Test commands
t = "nextest run"
ta = "nextest run --run-ignored all"  # All tests including AWS

# Check/lint
c = "check"
cl = "clippy"

# Static linking configuration for musl targets
[target.x86_64-unknown-linux-musl]
rustflags = ["-C", "target-feature=+crt-static"]

[target.aarch64-unknown-linux-musl]
rustflags = ["-C", "target-feature=+crt-static"]
